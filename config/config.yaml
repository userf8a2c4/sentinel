master_switch: "ON" # ON/OFF para habilitar procesos automáticos.
base_url: "https://results.example.org/api/v1/results" # URL base del API oficial.
# Ejemplo de URL completa (NACIONAL): https://results.example.org/api/v1/results?scope=NATIONAL&level=PRES
# Ejemplo de URL completa (REGIÓN): https://results.example.org/api/v1/results?scope=REGION&level=REG&region_code=01
# Parámetros comunes: scope (NATIONAL/REGION), level (PRES/REG), region_code (01-18).
endpoints:
  # Endpoint principal de resultados presidenciales nacionales
  # National presidential results main endpoint
  # Si falla → fallback a Playwright scraping
  nacional: "https://results.example.org/api/v1/national/presidential"
  # Variante conocida para totales nacionales
  # Known national totals variant
  fallback_nacional: "https://results.example.org/api/v1/national/presidential/totals"
  # Endpoints por región (01-18)
  # Region endpoints (01-18)
  "01": "https://results.example.org/api/v1/regions/01/presidential"
  "02": "https://results.example.org/api/v1/regions/02/presidential"
  "03": "https://results.example.org/api/v1/regions/03/presidential"
  "04": "https://results.example.org/api/v1/regions/04/presidential"
  "05": "https://results.example.org/api/v1/regions/05/presidential"
  "06": "https://results.example.org/api/v1/regions/06/presidential"
  "07": "https://results.example.org/api/v1/regions/07/presidential"
  "08": "https://results.example.org/api/v1/regions/08/presidential"
  "09": "https://results.example.org/api/v1/regions/09/presidential"
  "10": "https://results.example.org/api/v1/regions/10/presidential"
  "11": "https://results.example.org/api/v1/regions/11/presidential"
  "12": "https://results.example.org/api/v1/regions/12/presidential"
  "13": "https://results.example.org/api/v1/regions/13/presidential"
  "14": "https://results.example.org/api/v1/regions/14/presidential"
  "15": "https://results.example.org/api/v1/regions/15/presidential"
  "16": "https://results.example.org/api/v1/regions/16/presidential"
  "17": "https://results.example.org/api/v1/regions/17/presidential"
  "18": "https://results.example.org/api/v1/regions/18/presidential"
timeout: 15 # Segundos máximos por solicitud.
retries: 3 # Reintentos totales antes de fallar.
headers: # Encabezados HTTP enviados en cada solicitud.
  Accept: "application/json" # Tipo de respuesta esperado.
  User-Agent: "C.E.N.T.I.N.E.L./1.0" # Identificador del cliente.
use_playwright: false # Usa Playwright como fallback cuando falle la descarga HTTP.
playwright_stealth: true # Activa el modo stealth (playwright-stealth) si está disponible.
playwright_user_agent: "C.E.N.T.I.N.E.L./1.0" # User-Agent para el contexto Playwright (por defecto usa headers.User-Agent).
playwright_viewport: # Viewport para Playwright.
  width: 1280
  height: 720
playwright_locale: "en-US" # Locale del contexto Playwright.
playwright_timezone: "UTC" # Timezone del contexto Playwright.
backoff_base_seconds: 1 # Espera inicial entre reintentos.
backoff_max_seconds: 30 # Espera máxima entre reintentos.
candidate_count: 10 # Número de candidatos esperados por fuente.
required_keys: [] # Claves obligatorias adicionales, si aplica.
field_map: # Mapeo de rutas JSON hacia campos normalizados.
  totals: # Totales agregados por fuente.
    valid_votes: # Votos válidos.
      - "estadisticas.distribucion_votos.validos" # Ruta JSON para votos válidos.
    null_votes: # Votos nulos.
      - "estadisticas.distribucion_votos.nulos" # Ruta JSON para votos nulos.
    blank_votes: # Votos en blanco.
      - "estadisticas.distribucion_votos.blancos" # Ruta JSON para votos en blanco.
    total_votes: # Total de votos.
      - "estadisticas.distribucion_votos.total" # Ruta JSON para total de votos.
  candidate_roots: # Raíces JSON donde vienen los candidatos.
    - "resultados" # Ruta JSON principal de resultados por candidato.

sources: # Fuentes configuradas para consultas.
  - name: "Nacional" # Etiqueta legible de la fuente.
    source_id: "NACIONAL" # Identificador para ambito=NATIONAL.
    level: "PRES" # Nivel electoral para esta fuente.
    scope: "NATIONAL" # Alcance de la fuente.
  - name: "Region 01" # Etiqueta legible de la fuente.
    department_code: "01" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 02" # Etiqueta legible de la fuente.
    department_code: "02" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 03" # Etiqueta legible de la fuente.
    department_code: "03" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 04" # Etiqueta legible de la fuente.
    department_code: "04" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 05" # Etiqueta legible de la fuente.
    department_code: "05" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 06" # Etiqueta legible de la fuente.
    department_code: "06" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 07" # Etiqueta legible de la fuente.
    department_code: "07" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 08" # Etiqueta legible de la fuente.
    department_code: "08" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 09" # Etiqueta legible de la fuente.
    department_code: "09" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 10" # Etiqueta legible de la fuente.
    department_code: "10" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 11" # Etiqueta legible de la fuente.
    department_code: "11" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 12" # Etiqueta legible de la fuente.
    department_code: "12" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 13" # Etiqueta legible de la fuente.
    department_code: "13" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 14" # Etiqueta legible de la fuente.
    department_code: "14" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 15" # Etiqueta legible de la fuente.
    department_code: "15" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 16" # Etiqueta legible de la fuente.
    department_code: "16" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 17" # Etiqueta legible de la fuente.
    department_code: "17" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.
  - name: "Region 18" # Etiqueta legible de la fuente.
    department_code: "18" # Código de región (01-18).
    level: "PD" # Nivel electoral para esta fuente.
    scope: "DEPARTMENT" # Alcance de la fuente.

logging:
  level: INFO # Opciones: DEBUG, INFO, WARNING, ERROR
  file: centinel.log # Ruta relativa al root

blockchain:
  enabled: false
  network: polygon-mumbai
  private_key: "0x..." # Advertencia: nunca commitear, usar secrets manager o .gitignore

alerts:
  critical_anomaly_types:
    - ARITHMETIC_MISMATCH
    - NEGATIVE_DELTA
    - CHANGE_POINT
    - RELATIVE_DELTA
    - SCRUTINY_JUMP
    - VOTE_BREAKDOWN_MISMATCH

arbitrum:
  enabled: false
  rpc_url: "https://arb1.arbitrum.io/rpc"
  private_key: "0x..." # Advertencia: nunca commitear, usar secrets manager o .gitignore
  contract_address: "0x..." # Después del deploy
  interval_minutes: 15
  batch_size: 19

rules:
  global_enabled: true
  trend_shift:
    enabled: true
    threshold_percent: 10
    max_hours: 3
  processing_speed:
    enabled: true
    max_actas_per_15min: 500
  irreversibility:
    enabled: true
    historical_participation_rate: 0.60
    sqlite_path: "reports/irreversibility_state.db"
  benford_law:
    enabled: true
    chi_square_threshold: 0.05
    deviation_pct: 15
    min_samples: 10
  ml_outliers:
    enabled: true
    contamination: 0.1
    min_samples: 5
  basic_diff:
    enabled: true
    relative_vote_change_pct: 15
  participation_anomaly:
    enabled: true
    scrutiny_jump_pct: 5
