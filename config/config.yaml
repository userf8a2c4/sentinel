# Configuración operativa principal de C.E.N.T.I.N.E.L.
# Main operational configuration for C.E.N.T.I.N.E.L.

# Interruptor maestro para procesos automáticos (ON/OFF).
# Master switch for automatic processes (ON/OFF).
master_switch: "ON"

# URL base del API oficial (placeholder).
# Base URL for the official API (placeholder).
base_url: "https://api.example.com/cne/resultados"

# Ejemplos de URL completas (solo referencia).
# Example full URLs (reference only).
# NACIONAL: https://api.example.com/cne/resultados?ambito=NACIONAL&nivel=PRES
# DEPARTAMENTO: https://api.example.com/cne/resultados?ambito=DEPARTMENT&nivel=PD&cod_departamento=01
# Parámetros comunes: ambito, nivel, cod_departamento.
# Common parameters: ambito, nivel, cod_departamento.

# Endpoints operativos por ámbito.
# Operational endpoints by scope.
endpoints:
  # Endpoint principal de resultados presidenciales nacionales.
  # National presidential results main endpoint.
  nacional: "https://resultadosgenerales2025.cne.hn/api/presidencial/nacional"
  # Variante conocida para totales nacionales.
  # Known national totals variant.
  fallback_nacional: "https://resultadosgenerales2025.cne.hn/api/resultados/presidencial/totales"
  # Endpoints por departamento (01-18).
  # Department endpoints (01-18).
  "01": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/01"
  "02": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/02"
  "03": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/03"
  "04": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/04"
  "05": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/05"
  "06": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/06"
  "07": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/07"
  "08": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/08"
  "09": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/09"
  "10": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/10"
  "11": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/11"
  "12": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/12"
  "13": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/13"
  "14": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/14"
  "15": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/15"
  "16": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/16"
  "17": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/17"
  "18": "https://resultadosgenerales2025.cne.hn/api/presidencial/departamento/18"

# Red y resiliencia.
# Network and resilience.
# Timeout máximo por solicitud (segundos).
# Max timeout per request (seconds).
timeout: 15
# Reintentos totales antes de fallar.
# Total retries before failing.
retries: 3
# Backoff exponencial entre reintentos (segundos).
# Exponential backoff between retries (seconds).
backoff_base_seconds: 1
# Espera máxima entre reintentos (segundos).
# Max wait between retries (seconds).
backoff_max_seconds: 30

# Encabezados HTTP enviados en cada solicitud.
# HTTP headers sent with every request.
headers:
  # Tipo de respuesta esperado.
  # Expected response type.
  Accept: "application/json"
  # Identificador del cliente.
  # Client identifier.
  User-Agent: "C.E.N.T.I.N.E.L./1.0"

# Fallback Playwright cuando falle la descarga HTTP.
# Playwright fallback when HTTP download fails.
use_playwright: false
# Activa modo stealth (playwright-stealth) si está disponible.
# Enable stealth mode (playwright-stealth) when available.
playwright_stealth: true
# User-Agent específico para el contexto Playwright.
# Playwright context User-Agent.
playwright_user_agent: "C.E.N.T.I.N.E.L./1.0"
# Viewport de Playwright.
# Playwright viewport.
playwright_viewport:
  width: 1280
  height: 720
# Locale del contexto Playwright.
# Playwright context locale.
playwright_locale: "es-HN"
# Zona horaria del contexto Playwright.
# Playwright context timezone.
playwright_timezone: "America/Tegucigalpa"

# Validaciones de contenido esperado.
# Expected-content validations.
# Número de candidatos esperados por fuente.
# Expected number of candidates per source.
candidate_count: 10
# Claves obligatorias adicionales, si aplica.
# Additional required keys, if any.
required_keys: []

# Mapeo de rutas JSON hacia campos normalizados.
# Mapping of JSON paths to normalized fields.
field_map:
  # Totales agregados por fuente.
  # Totals aggregated per source.
  totals:
    # Votos válidos.
    # Valid votes.
    valid_votes:
      - "estadisticas.distribucion_votos.validos"
    # Votos nulos.
    # Null votes.
    null_votes:
      - "estadisticas.distribucion_votos.nulos"
    # Votos en blanco.
    # Blank votes.
    blank_votes:
      - "estadisticas.distribucion_votos.blancos"
    # Total de votos.
    # Total votes.
    total_votes:
      - "estadisticas.distribucion_votos.total"
  # Raíces JSON donde vienen los candidatos.
  # JSON roots where candidates are located.
  candidate_roots:
    - "resultados"

# Fuentes configuradas para consultas.
# Configured sources for queries.
sources:
  # Fuente nacional.
  # National source.
  - name: "Nacional"
    # Identificador para ambito=NATIONAL.
    # Identifier for ambito=NATIONAL.
    source_id: "NACIONAL"
    # Nivel electoral.
    # Electoral level.
    level: "PRES"
    # Alcance de la fuente.
    # Source scope.
    scope: "NATIONAL"
  # Fuentes departamentales (01-18).
  # Department sources (01-18).
  - name: "Atlántida"
    department_code: "01"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Choluteca"
    department_code: "02"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Colón"
    department_code: "03"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Comayagua"
    department_code: "04"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Copán"
    department_code: "05"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Cortés"
    department_code: "06"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "El Paraíso"
    department_code: "07"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Francisco Morazán"
    department_code: "08"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Gracias a Dios"
    department_code: "09"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Intibucá"
    department_code: "10"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Islas de la Bahía"
    department_code: "11"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "La Paz"
    department_code: "12"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Lempira"
    department_code: "13"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Ocotepeque"
    department_code: "14"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Olancho"
    department_code: "15"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Santa Bárbara"
    department_code: "16"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Valle"
    department_code: "17"
    level: "PD"
    scope: "DEPARTMENT"
  - name: "Yoro"
    department_code: "18"
    level: "PD"
    scope: "DEPARTMENT"

# Logging centralizado.
# Centralized logging.
logging:
  # Nivel de logging.
  # Logging level.
  level: INFO
  # Archivo de log relativo al root.
  # Log file path relative to repo root.
  file: "C.E.N.T.I.N.E.L.log"

# Blockchain (opcional).
# Blockchain (optional).
blockchain:
  # Habilitar publicación en cadena.
  # Enable on-chain publishing.
  enabled: false
  # Red objetivo.
  # Target network.
  network: polygon-mumbai
  # Llave privada (usar secrets manager / .env).
  # Private key (use secrets manager / .env).
  private_key: "0x..."

# Alertas críticas.
# Critical alerts.
alerts:
  # Tipos críticos de anomalías.
  # Critical anomaly types.
  critical_anomaly_types:
    - ARITHMETIC_MISMATCH
    - NEGATIVE_DELTA
    - CHANGE_POINT
    - RELATIVE_DELTA
    - SCRUTINY_JUMP
    - VOTE_BREAKDOWN_MISMATCH

# Configuración Arbitrum (opcional).
# Arbitrum configuration (optional).
arbitrum:
  enabled: false
  network: "Arbitrum One"
  rpc_url: "https://arb1.arbitrum.io/rpc"
  private_key: "0x..."
  contract_address: "0x..."
  explorer_url: "https://arbiscan.io/tx/"
  interval_minutes: 15
  batch_size: 19
  auto_anchor_snapshots: true

# Reglas de análisis.
# Analysis rules.
rules:
  global_enabled: true
  trend_shift:
    enabled: true
    threshold_percent: 10
    max_hours: 3
  processing_speed:
    enabled: true
    max_actas_per_15min: 500
  irreversibility:
    enabled: true
    historical_participation_rate: 0.60
    sqlite_path: "reports/irreversibility_state.db"
  benford_law:
    enabled: true
    chi_square_threshold: 0.05
    deviation_pct: 15
    min_samples: 10
  ml_outliers:
    enabled: true
    contamination: 0.1
    min_samples: 5
  basic_diff:
    enabled: true
    relative_vote_change_pct: 15
  participation_anomaly:
    enabled: true
    scrutiny_jump_pct: 5
  granular_anomaly:
    enabled: true
    negative_delta_threshold: 0
    delta_pct_alert: 3.0
    delta_pct_time_window_minutes: 30
    zscore_threshold: 3.0
    zscore_min_abs_delta: 100
    zscore_min_departments: 5
    benford_pvalue_threshold: 0.05
    benford_min_samples: 50
    benford_min_vote: 10
    turnout_min_pct: 0
    turnout_max_pct: 100
    mesa_min_registered: 300
    mesa_min_turnout_pct: 2
    mesa_max_turnout_pct: 100
    reversal_min_lead_margin: 500
    reversal_time_window_minutes: 30
    reversal_min_negative_delta: 100
    actas_negative_delta_threshold: -1
    mesas_negative_delta_threshold: -1
