services:
  cron:
    build: .
    volumes:
      - ./data:/app/data
      - ./config.yaml:/app/config.yaml
      - ./.env:/app/.env
    entrypoint: /bin/sh
    command: >-
      -c "echo '*/5 * * * * cd /app && python scripts/run_pipeline.py --once >> /app/data/cron.log 2>&1' > /etc/cron.d/centinel &&
      crontab /etc/cron.d/centinel &&
      cron -f"
